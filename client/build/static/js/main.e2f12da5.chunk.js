(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(e,t,a){e.exports=a(74)},48:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a(12),l=a(14),r=a(13),s=a(0),m=a.n(s),i=a(16),o=a(3),d=a(34),u=(a(48),a(78)),p=a(75),h=a(76),v=function(){return m.a.createElement(u.a,{className:"navbar navbar-expand-lg navbar-dark bg-dark"},m.a.createElement(p.a,null,m.a.createElement(i.b,{className:"navbar-brand",to:"/"},"Online Funko Pop"),m.a.createElement(h.a,{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},m.a.createElement("span",{className:"navbar-toggler-icon"})),m.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},m.a.createElement("ul",{className:"navbar-nav"},m.a.createElement("li",{className:"nav-item"},m.a.createElement(i.c,{activeClassName:"active",className:"nav-link",to:"/"},"Home")),m.a.createElement("li",{className:"nav-item"},m.a.createElement(i.c,{activeClassName:"active",className:"nav-link",to:"/my-order"},"My Order")),m.a.createElement("li",{className:"nav-item"},m.a.createElement(i.c,{activeClassName:"active",className:"nav-link",to:"/order-status"},"Order Status"))))))},E=a(6),b=a.n(E),f=a(77),N=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={products:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/api/products").then((function(t){var a=t.data;e.setState({products:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.products;return m.a.createElement(p.a,null,m.a.createElement("br",null),m.a.createElement("h1",{className:"mt-3"},"Products"),m.a.createElement(f.a,null,e?e.map((function(e,t){return m.a.createElement("div",{className:"col-4",key:t},m.a.createElement("div",{className:"card"},m.a.createElement("img",{className:"card-img product-img",src:e.imgUrl,alt:e.name}),m.a.createElement("div",{className:"card-body"},m.a.createElement("h4",{className:"card-title"},e.name),m.a.createElement("p",{className:"card-text"},e.description),m.a.createElement("div",{className:"buy d-flex justify-content-between align-items-center"},m.a.createElement("div",{className:"price text-success"},m.a.createElement("h4",{className:"mt-4"},"RM",e.price.toFixed(2))),m.a.createElement(i.b,{to:"/productInfo/".concat(e.urlId)},m.a.createElement(h.a,{className:"btn btn-dark mt-3"},"Create Order"))))))})):null))}}]),a}(s.Component),g=a(15),y=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){var c;return Object(n.a)(this,a),(c=t.call(this)).state={product:[],id:e.match.params.id,quantity:1},c.handleChange=c.handleChange.bind(Object(g.a)(c)),c.handleClick=c.handleClick.bind(Object(g.a)(c)),c}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/api/products/".concat(this.state.id)).then((function(t){var a=t.data;e.setState({product:a})})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({quantity:t})}},{key:"handleClick",value:function(e){var t=this,a=this.state.product,n=this.state.quantity;b.a.post("/api/order",{product:a,quantity:n}).then((function(e){console.log("\ud83d\udc49 Returned data:",e.data),t.props.history.push("/my-order")}))}},{key:"render",value:function(){var e=this.state.product;return m.a.createElement("div",null,m.a.createElement(p.a,null,m.a.createElement("br",null),m.a.createElement("div",{className:"card mb-3"},m.a.createElement("div",{className:"row no-gutters"},m.a.createElement("div",{className:"col-4"},m.a.createElement("img",{src:e.imgUrl,className:"card-img",alt:e.name})),m.a.createElement("div",{className:"card-body d-flex flex-column"},m.a.createElement("h5",{className:"card-title"},e.name),m.a.createElement("p",{className:"card-text"},e.description),m.a.createElement("p",{className:"card-text"},m.a.createElement("span",{className:"badge badge-dark"},e.price)),m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{htmlFor:"example-number-input",className:"col-2 col-form-label"},"Quantity"),m.a.createElement("div",{className:"col-10"},m.a.createElement("input",{className:"form-control",type:"number",defaultValue:"1",onChange:this.handleChange.bind(this),id:"example-number-input"}))),m.a.createElement(h.a,{onClick:this.handleClick,className:"align-self-end mt-auto btn btn-lg btn-block btn-dark"},"Order"))))))}}]),a}(s.Component),O=a(40),k=a.n(O),x=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={orders:[],price:0},e.handlePayment=e.handlePayment.bind(Object(g.a)(e)),e.handleRemove=e.handleRemove.bind(Object(g.a)(e)),e.cancelOrder=e.cancelOrder.bind(Object(g.a)(e)),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/api/orders").then((function(t){var a=t.data,n=0;a.forEach((function(e){n+=e.items[0].price*e.items[0].qty})),console.log(n),e.setState({orders:a,price:n.toFixed(2)})})).catch((function(e){console.log(e)}))}},{key:"cancelOrder",value:function(e){e.preventDefault(),b.a.delete("/api/cancelOrder").then((function(){window.location.reload(!1)}))}},{key:"handleRemove",value:function(e,t){e.preventDefault(),b.a.delete("/api/order",{data:{urlId:t.urlId}}).then((function(){window.location.reload(!1)}))}},{key:"handlePayment",value:function(e){var t=this;e.preventDefault();var a=k.a.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});a.fire({title:"Proceed to payment?",text:"You won't be able to revert this!",icon:"info",showCancelButton:!0,confirmButtonText:"Proceed",cancelButtonText:"Cancel",reverseButtons:!0}).then((function(e){b.a.get("/payment/process/").then((function(e){if("Successful"===e.data){var n=t.state.orders,c=t.state.price;b.a.post("/api/orderConfirmed",{orders:n,totalPrice:c}).then((function(e){console.log("\ud83d\udc49 Returned data:",e.data),t.props.history.push("/order-status")})).then((function(){b.a.delete("/api/cancelOrder")})).then((function(){a.fire("Successful!","Your payment has been successful!","success")}))}else a.fire("Uh-oh!","We are not able to process your payment.","error")})).catch((function(e){console.log(e)}))}))}},{key:"render",value:function(){var e=this,t=this.state.orders,a=t.length>0;return m.a.createElement(p.a,null,m.a.createElement("table",{id:"cart",className:"table table-hover table-condensed"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"Product"),m.a.createElement("th",null,"Price"),m.a.createElement("th",{style:{width:"1%"},className:"text-center"},"Quantity"),m.a.createElement("th",{style:{width:"8%"},className:"text-center"},"Status"),m.a.createElement("th",{style:{width:"15%"}}))),m.a.createElement("tbody",null,t?t.map((function(t,a){return m.a.createElement("tr",{key:a},m.a.createElement("td",{"data-th":"Product"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-2 hidden-xs"},m.a.createElement("img",{src:t.items[0].imgUrl,alt:t.items[0].name,className:"img-responsive"})),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement("h4",{className:"margin-left-10"},t.items[0].name),m.a.createElement("p",{className:"margin-left-10"},t.items[0].description)))),m.a.createElement("td",{"data-th":"Price"},"RM ",t.items[0].price),m.a.createElement("td",{"data-th":"Quantity",className:"text-center"},t.items[0].qty),m.a.createElement("td",{"data-th":"Status",className:"text-center"},t.status),m.a.createElement("td",{className:"actions text-center","data-th":""},m.a.createElement(h.a,{type:"submit",onClick:function(a){return e.handleRemove(a,t)},className:"btn btn-danger btn-sm"},"Remove")))})):null),m.a.createElement("tfoot",null,m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement(h.a,{onClick:function(t){return e.cancelOrder(t)},className:"btn btn-warning",disabled:!a},"Cancel Order")),m.a.createElement("td",{colSpan:"2",className:"hidden-xs"}),m.a.createElement("td",{className:"hidden-xs text-center"},m.a.createElement("strong",null,"Total RM",this.state.price)),m.a.createElement("td",null,m.a.createElement(h.a,{onClick:function(t){return e.handlePayment(t)},className:"btn btn-success btn-block",disabled:!a},"Confirm Order"))))))}}]),a}(s.Component),j=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={confirmedOrder:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/api/confirmedOrdersList").then((function(t){var a=t.data;e.setState({confirmedOrder:a})})).catch((function(e){console.log(e)}))}},{key:"changeToDelivered",value:function(){b.a.post("/api/changeDeliveredStatus")}},{key:"render",value:function(){var e=this.state.confirmedOrder;return m.a.createElement(p.a,null,m.a.createElement("p",{className:"hidden"},setTimeout(this.changeToDelivered,5e3)),m.a.createElement("h1",{className:"mt-3"},"Your Order Status"),m.a.createElement(f.a,null,e?e.reverse().map((function(e,t){return m.a.createElement("div",{className:"col-12 mt-3",key:t},m.a.createElement("div",{className:"card overflow-hidden"},m.a.createElement("div",{className:"card-content"},m.a.createElement("div",{className:"card-body cleartfix"},m.a.createElement("div",{className:"media align-items-stretch"},m.a.createElement("div",{className:"media-body"},m.a.createElement("h4",null,e.orderName),m.a.createElement("span",null,"Tracking code: ",e.urlId),m.a.createElement("h5",{className:"mt-3"},"Ordered item: "),m.a.createElement("ul",null,e.items.map((function(e,t){return m.a.createElement("li",{key:t},e.items[0].name," x",e.items[0].qty)})))),m.a.createElement("div",{className:"align-self-center"},m.a.createElement("h1",null,"RM",e.totalPrice.toFixed(2))))),m.a.createElement("div",{className:"card-footer"},m.a.createElement("div",{className:"align-self-center justify-content-center"},m.a.createElement("div",{className:"col-12 hh-grayBox pt45 pb20"},m.a.createElement("div",{className:"row justify-content-between"},m.a.createElement("div",{className:"order-tracking completed"},m.a.createElement("span",{className:"is-complete"}),m.a.createElement("p",null,"Ordered")),m.a.createElement("div",{className:"order-tracking completed"},m.a.createElement("span",{className:"is-complete"}),m.a.createElement("p",null,"Shipped")),"shipped"===e.status?m.a.createElement("div",{className:"order-tracking"},m.a.createElement("span",{className:"is-complete"}),m.a.createElement("p",null,"Delivered")):m.a.createElement("div",{className:"order-tracking completed"},m.a.createElement("span",{className:"is-complete"}),m.a.createElement("p",null,"Delivered")))))))))})):null))}}]),a}(s.Component),C=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={name:"Online Order App"},e}return Object(c.a)(a,[{key:"render",value:function(){return m.a.createElement(i.a,null,m.a.createElement(s.Fragment,null,m.a.createElement(v,null),m.a.createElement(o.a,{exact:!0,path:"/",component:N}),m.a.createElement(o.a,{exact:!0,path:"/productInfo/:id",component:y}),m.a.createElement(o.a,{exact:!0,path:"/my-order/",component:x}),m.a.createElement(o.a,{exact:!0,path:"/order-status/",component:j})))}}]),a}(s.Component);Object(d.render)(m.a.createElement(C,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.e2f12da5.chunk.js.map